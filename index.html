<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>StreamFlix - Netflix Style</title>
<style>
  /* Netflix-ähnliches Farbschema */
  body {
    margin: 0;
    background-color: #141414;
    color: #fff;
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  }
  header {
    background-color: #111;
    padding: 15px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  header h1 {
    font-weight: 900;
    font-size: 28px;
    color: #e50914;
    margin: 0;
  }
  #logoutBtn {
    background: transparent;
    border: none;
    color: #fff;
    font-weight: 700;
    cursor: pointer;
    font-size: 16px;
    padding: 8px 16px;
  }
  #logoutBtn:hover {
    text-decoration: underline;
  }

  /* Login-Bereich */
  #login {
    max-width: 320px;
    margin: 100px auto;
    background: #222;
    padding: 40px 30px;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.7);
  }
  #login h2 {
    margin-bottom: 20px;
    font-weight: 700;
    font-size: 24px;
    text-align: center;
  }
  #login input {
    width: 100%;
    padding: 12px 15px;
    margin: 10px 0;
    border: none;
    border-radius: 4px;
    font-size: 16px;
  }
  #login button {
    width: 100%;
    background: #e50914;
    border: none;
    color: #fff;
    font-weight: 700;
    padding: 14px;
    border-radius: 4px;
    font-size: 18px;
    cursor: pointer;
    margin-top: 15px;
  }
  #login button:hover {
    background: #f40612;
  }
  #loginError {
    color: #ff6161;
    text-align: center;
    margin-top: 10px;
    min-height: 20px;
  }

  /* Hauptbereich mit Filmen */
  #main {
    max-width: 1200px;
    margin: 30px auto;
    padding: 0 20px 60px;
  }
  #welcome {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 25px;
  }
  .movie-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(180px,1fr));
    gap: 20px;
  }
  .movie-card {
    position: relative;
    cursor: pointer;
    border-radius: 6px;
    overflow: hidden;
    background: #222;
    box-shadow: 0 0 8px rgba(0,0,0,0.9);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .movie-card.highlight {
    border: 3px solid #f5c518; /* Netflix Top10 gold */
  }
  .movie-card:hover {
    transform: scale(1.05);
    box-shadow: 0 0 15px #e50914;
    z-index: 10;
  }
  .movie-card img {
    width: 100%;
    display: block;
  }
  .movie-title {
    padding: 10px 10px 8px;
    font-weight: 700;
    font-size: 16px;
    background: #141414;
    color: #fff;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .btn-play {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(229, 9, 20, 0.8);
    border: none;
    padding: 12px 25px;
    font-size: 16px;
    font-weight: 700;
    border-radius: 25px;
    color: white;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  .movie-card:hover .btn-play {
    opacity: 1;
  }
  .btn-highlight {
    background: #444;
    border: none;
    color: #f5c518;
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 700;
    margin: 8px auto 10px;
    display: block;
    cursor: pointer;
  }
  .btn-highlight:hover {
    background: #333;
  }
  video {
    margin-top: 10px;
    width: 100%;
    border-radius: 6px;
  }
</style>
</head>
<body>

<header>
  <h1>StreamFlix</h1>
  <button id="logoutBtn" style="display:none" onclick="logout()">Logout</button>
</header>

<div id="login">
  <h2>Login</h2>
  <input type="text" id="username" placeholder="Benutzername" autocomplete="username" />
  <input type="password" id="password" placeholder="PIN" autocomplete="current-password" />
  <button onclick="login()">Anmelden</button>
  <p id="loginError"></p>
</div>

<div id="main" style="display:none">
  <h2 id="welcome"></h2>
  <div class="movie-grid" id="movieContainer"></div>
</div>

<script>
  const users = {
    admin: { password: "admin", role: "owner" },
    user1: { password: "1234", role: "user" }
  };

  const movies = [
    {
      id: "movie1",
      title: "Der Pate",
      file: "movies/godfather.mp4",
      poster: "posters/godfather.jpg",
      highlighted: false
    },
    {
      id: "movie2",
      title: "Inception",
      file: "movies/inception.mp4",
      poster: "posters/inception.jpg",
      highlighted: false
    },
    {
      id: "movie3",
      title: "Matrix",
      file: "movies/matrix.mp4",
      poster: "posters/matrix.jpg",
      highlighted: false
    },
    {
      id: "movie4",
      title: "Interstellar",
      file: "movies/interstellar.mp4",
      poster: "posters/interstellar.jpg",
      highlighted: false
    },
    {
      id: "movie5",
      title: "Fight Club",
      file: "movies/fightclub.mp4",
      poster: "posters/fightclub.jpg",
      highlighted: false
    },
    {
      id: "movie6",
      title: "Der Herr der Ringe",
      file: "movies/lotr.mp4",
      poster: "posters/lotr.jpg",
      highlighted: false
    }
  ];

  let currentUser = null;

  function login() {
    const user = document.getElementById("username").value.trim();
    const pass = document.getElementById("password").value.trim();
    const errorEl = document.getElementById("loginError");

    if (users[user] && users[user].password === pass) {
      currentUser = { name: user, role: users[user].role };
      document.getElementById("login").style.display = "none";
      document.getElementById("main").style.display = "block";
      document.getElementById("logoutBtn").style.display = "inline-block";
      errorEl.textContent = "";
      renderMovies();
    } else {
      errorEl.textContent = "Falscher Benutzername oder PIN.";
    }
  }

  function logout() {
    currentUser = null;
    document.getElementById("main").style.display = "none";
    document.getElementById("login").style.display = "block";
    document.getElementById("logoutBtn").style.display = "none";
    document.getElementById("username").value = "";
    document.getElementById("password").value = "";
    document.getElementById("loginError").textContent = "";
  }

  function renderMovies() {
    const container = document.getElementById("movieContainer");
    const welcome = document.getElementById("welcome");
    welcome.textContent = `Willkommen, ${currentUser.name}`;
    container.innerHTML = "";

    movies.forEach(movie => {
      const card = document.createElement("div");
      card.className = "movie-card" + (movie.highlighted ? " highlight" : "");

      // Poster
      const img = document.createElement("img");
      img.src = movie.poster;
      img.alt = movie.title;

      // Titel
      const title = document.createElement("div");
      title.className = "movie-title";
      title.textContent = movie.title;

      // Play Button (overlay)
      const playBtn = document.createElement("button");
      playBtn.className = "btn-play";
      playBtn.textContent = "PLAY";
      playBtn.onclick = e => {
        e.stopPropagation();
        playMovie(movie, card);
      };

      // Highlight Button nur für Owner
      if (currentUser.role === "owner") {
        const highlightBtn = document.createElement("button");
        highlightBtn.className = "btn-highlight";
        highlightBtn.textContent = movie.highlighted ? "Top 10 entfernen" : "Als Top 10 markieren";
        highlightBtn.onclick = e => {
          e.stopPropagation();
          movie.highlighted = !movie.highlighted;
          renderMovies();
        };
        card.appendChild(highlightBtn);
      }

      card.appendChild(img);
      card.appendChild(title);
      card.appendChild(playBtn);

      // Klick auf ganze Karte auch startet Video
      card.onclick = () => playMovie(movie, card);

      container.appendChild(card);
    });
  }

  function playMovie(movie, card) {
    // Entferne ggf. bereits vorhandenes Video (Toggle)
    const existingVideo = card.querySelector("video");
    if (existingVideo) {
      existingVideo.remove();
      return;
    }

    const video = document.createElement("video");
    video.src = movie.file;
    video.controls = true;
    video.autoplay = true;
    video.style.marginTop = "10px";
    card.appendChild(video);
    video.scrollIntoView({behavior:"smooth"});
  }
</script>

</body>
</html>
