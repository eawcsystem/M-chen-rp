<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StreamFlix</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #000; color: #fff; }
    header { display: flex; justify-content: space-between; padding: 1rem; background: #111; }
    h1 { margin: 0; font-size: 1.5rem; }
    #languageToggle { cursor: pointer; font-size: 0.9rem; }
    #login, #main { max-width: 900px; margin: 2rem auto; padding: 1rem; }
    .movie-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 1rem; }
    .movie-card { background: #1c1c1c; padding: 10px; border-radius: 8px; position: relative; }
    .movie-card img { width: 100%; border-radius: 4px; }
    .movie-card h3 { margin: 0.5rem 0; font-size: 1rem; }
    .btn { background: #e50914; border: none; color: #fff; padding: 8px 12px; border-radius: 4px; cursor: pointer; }
    .btn:hover { background: #f40612; }
    .highlight { border: 2px solid yellow; }
    video { width: 100%; margin-top: 1rem; border-radius: 8px; }
    .admin-btn { margin-top: 5px; background: #333; font-size: 0.8rem; }
    #logoutBtn { float: right; background: #444; }
  </style>
</head>
<body>

<header>
  <h1>StreamFlix</h1>
  <div>
    <span id="languageToggle">EN</span>
    <button id="logoutBtn" class="btn" style="display:none;">Logout</button>
  </div>
</header>

<div id="login">
  <h2>Login</h2>
  <input type="text" id="username" placeholder="Benutzername" />
  <input type="password" id="password" placeholder="PIN" />
  <button class="btn" onclick="login()">Anmelden</button>
  <p id="loginError" style="color:red;"></p>
</div>

<div id="main" style="display:none;">
  <h2 id="welcome"></h2>
  <div class="movie-grid" id="movieContainer"></div>
</div>

<script>
  const users = {
    admin: { password: "admin", role: "owner" },
    user1: { password: "1234", role: "user" }
  };

  const movies = [
    {
      id: "godfather",
      title: { de: "Der Pate", en: "The Godfather" },
      file: "movies/godfather.mp4",
      poster: "posters/godfather.jpg",
      highlighted: false
    },
    {
      id: "inception",
      title: { de: "Inception", en: "Inception" },
      file: "movies/inception.mp4",
      poster: "posters/inception.jpg",
      highlighted: false
    }
    // Du kannst hier mehr Filme hinzufÃ¼gen
  ];

  let lang = "de";
  let currentUser = null;

  const languageToggle = document.getElementById("languageToggle");
  const logoutBtn = document.getElementById("logoutBtn");

  function login() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    const errorEl = document.getElementById("loginError");

    if (users[user] && users[user].password === pass) {
      currentUser = { name: user, role: users[user].role };
      document.getElementById("login").style.display = "none";
      document.getElementById("main").style.display = "block";
      logoutBtn.style.display = "inline-block";
      renderMovies();
    } else {
      errorEl.textContent = lang === "de" ? "Falscher Benutzer oder PIN." : "Wrong username or PIN.";
    }
  }

  function logout() {
    currentUser = null;
    document.getElementById("main").style.display = "none";
    document.getElementById("login").style.display = "block";
    logoutBtn.style.display = "none";
  }

  logoutBtn.onclick = logout;

  languageToggle.onclick = () => {
    lang = lang === "de" ? "en" : "de";
    languageToggle.textContent = lang === "de" ? "EN" : "DE";
    if (currentUser) renderMovies();
  };

  function renderMovies() {
    const container = document.getElementById("movieContainer");
    const welcome = document.getElementById("welcome");
    welcome.textContent = (lang === "de" ? "Willkommen" : "Welcome") + ", " + currentUser.name;
    container.innerHTML = "";

    movies.forEach(movie => {
      const card = document.createElement("div");
      card.className = "movie-card" + (movie.highlighted ? " highlight" : "");

      const img = document.createElement("img");
      img.src = movie.poster;
      img.alt = movie.title[lang];

      const title = document.createElement("h3");
      title.textContent = movie.title[lang];

      const playBtn = document.createElement("button");
      playBtn.className = "btn";
      playBtn.textContent = lang === "de" ? "Abspielen" : "Play";
      playBtn.onclick = () => playMovie(movie, card);

      card.appendChild(img);
      card.appendChild(title);
      card.appendChild(playBtn);

      if (currentUser.role === "owner") {
        const toggleBtn = document.createElement("button");
        toggleBtn.className = "btn admin-btn";
        toggleBtn.textContent = movie.highlighted
          ? (lang === "de" ? "Hervorhebung entfernen" : "Unhighlight")
          : (lang === "de" ? "Hervorheben" : "Highlight");
        toggleBtn.onclick = () => {
          movie.highlighted = !movie.highlighted;
          renderMovies();
        };
        card.appendChild(toggleBtn);
      }

      container.appendChild(card);
    });
  }

  function playMovie(movie, cardElement) {
    const existingVideo = cardElement.querySelector("video");
    if (existingVideo) {
      existingVideo.remove();
      return;
    }

    const video = document.createElement("video");
    video.src = movie.file;
    video.controls = true;
    video.autoplay = true;
    cardElement.appendChild(video);
  }
</script>

</body>
</html>
